(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{336:function(t,e,n){t.exports=n.p+"img/btn.df4f6ae.png"},338:function(t,e,n){var content=n(347);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(25).default)("49d0821a",content,!0,{sourceMap:!1})},339:function(t,e,n){var content=n(349);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(25).default)("eb100f08",content,!0,{sourceMap:!1})},346:function(t,e,n){"use strict";var o=n(338);n.n(o).a},347:function(t,e,n){var o=n(24),r=n(134),c=n(336);e=o(!1);var l=r(c);e.push([t.i,'.container[data-v-f16ed2dc]{margin:0 auto;min-height:100vh;text-align:center;padding:10px;color:#fff}.container .note[data-v-f16ed2dc]{font-weight:700;color:#1dfefe}.container .btns[data-v-f16ed2dc]{margin:50px}.container .btns .btn[data-v-f16ed2dc]{color:#04def0;font-weight:700;font-family:"微软雅黑";padding:15px 32px;margin:0 10px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-image:url('+l+");background-size:100% 100%;cursor:pointer}.container .btns .btn[data-v-f16ed2dc]:hover{color:#fff}.container .main[data-v-f16ed2dc]{width:702px;background:#330a66;box-shadow:0 0 #333;border-radius:10px;border:7px solid #1dfefe;margin:10px auto;box-shadow:0 2px 12px 0 rgba(0,0,0,.1)}.container .main .items[data-v-f16ed2dc]{width:100px;height:100px;position:relative;border:1px solid #1dfefe;float:left;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background:#330a66;transition:all .2s;font-size:14px;display:flex;flex-wrap:wrap;justify-content:center;align-items:center}.container .main .items .item[data-v-f16ed2dc]{width:95px;height:25px;line-height:23px;margin:3px;border-radius:15px;z-index:99;color:#1eeaf0;background:#635393;border:1px solid #1dfefe}.container .main .items .focus[data-v-f16ed2dc]{color:#0e025e;font-weight:700;background-color:#edcc53;border-color:#929a19}.container .main .items .gold[data-v-f16ed2dc]{width:100px;height:100px;position:absolute;top:0;left:0;color:#969494;padding-top:10px;font-size:60px;font-style:italic;z-index:1;opacity:.3}.container .main .items[data-v-f16ed2dc]:hover{background:#eee}.container .wrapbox[data-v-f16ed2dc]{position:absolute;top:170px;right:20px;width:300px;font-size:14px;padding:12px;color:#1ceaee;word-break:break-all;border-radius:10px;border:3px solid #1dfefe;background:#1d0957;box-shadow:0 2px 12px 0 rgba(0,0,0,.1)}.container .wrapbox .tips[data-v-f16ed2dc]{font-size:20px;font-weight:700;line-height:30px}.container .wrapbox .tips span[data-v-f16ed2dc]{font-size:13px;font-weight:300}.container .wrapbox .list[data-v-f16ed2dc]{min-width:150px;z-index:2000;width:300px;max-height:300px;line-height:1.4;text-align:justify;overflow-y:auto}.container .playerlist[data-v-f16ed2dc]{top:400px;right:20px}.container .focusPlayer[data-v-f16ed2dc]{top:170px;right:20px}.container .focusPlayer .ranking[data-v-f16ed2dc]{display:inline-block;font-weight:700;width:18px}.container .focusOver[data-v-f16ed2dc]{top:170px;left:20px}.container .focusOver .crtPos[data-v-f16ed2dc]{text-align:left;color:#fcf8a7;line-height:30px}.container .focusOver .list[data-v-f16ed2dc]{max-height:160px}.container .rank[data-v-f16ed2dc]{top:400px;left:20px}.container .rank .ranking[data-v-f16ed2dc]{color:#fcf8a7;width:22px}.container .rank .ranking[data-v-f16ed2dc],.container .tname[data-v-f16ed2dc]{font-size:16px;display:inline-block;font-weight:700}.container .tname[data-v-f16ed2dc]{width:96px;color:#add5fd}.container .gold[data-v-f16ed2dc]{font-weight:700;color:#ffeb00}.container .nodata[data-v-f16ed2dc]{line-height:50px}.container .noGame[data-v-f16ed2dc]{color:#fff;width:300px;margin:350px auto;padding:50px;border-radius:5px;color:#64dbf3;border:2px solid #1dfefe}",""]),t.exports=e},348:function(t,e,n){"use strict";var o=n(339);n.n(o).a},349:function(t,e,n){(e=n(24)(!1)).push([t.i,".el-checkbox__input.is-checked .el-checkbox__inner{background-color:#04def0;border-color:#04def0}.el-checkbox,.el-checkbox__input.is-checked+.el-checkbox__label{color:#04def0}.el-checkbox{line-height:30px}.el-checkbox__input.is-indeterminate .el-checkbox__inner{background-color:#04def0;border-color:#04def0}.el-page-header__content{font-size:18px;color:#04def0}.el-checkbox__label{width:90px}",""]),t.exports=e},361:function(t,e,n){"use strict";n.r(e);n(94),n(95),n(49);var o,r=n(4);function c(a,b){if(a.isFocus&&!b.isFocus)return-1}function l(a,b){if(a.Gold>b.Gold)return-1}var d={head:function(){return{title:"游戏回放 - 2020程序员节日游戏"}},data:function(){return{roundNo:0,loopId:0,playerlistShow:!0,playersInfo:[],crtPos:"",crtGold:"",players:[],total:[],isFirst:!0,checkAll:!1,focusPlayers:[],focusChecked:[],isIndeterminate:!1,allPlayers:[],allPlayersRank:[]}},watch:{roundNo:function(t){this.start()}},asyncData:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var n,o,data,r,c,l,d,f,v,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.app,o=t.query,data={gid:o.gid},e.next=4,n.$axios.get("game",{params:data});case 4:if(!((r=e.sent)instanceof Array)){e.next=13;break}return c=[],r.forEach((function(t){c.push(JSON.parse(t))})),l=c[0],d=l.Wid,f=l.Hei,v=100*d+14,h=100*f+14,e.abrupt("return",{allRound:c,x:d,y:f,mainW:v,mainH:h,nodata:!1});case 13:return e.abrupt("return",{nodata:!0});case 14:case"end":return e.stop()}}),e)})))()},methods:{start:function(){var t=this,e=this.x,n=this.y,r=(this.players,this.roundNo),d=this.allRound;this.focusChecked;if(r>d.length-1)return!1;for(var f=d[r].Tilemap,v=[],h=[],i=0;i<n;i++)for(var x=0;x<e;x++){var _=f[i][x],m=_.Players||[];this.isFirst&&_.Players&&m.map((function(e){t.allPlayers.push(e.Name)}));var y={players:m.map((function(t){return o.focusChecked.includes(t.Name)&&(t.isFocus=!0,h.push(t)),!o.focusChecked.includes(t.Name)&&(t.isFocus=!1),t})).sort(c)||[],pos:[x,i],gold:_.Gold};v.push(y)}this.isFirst=!1,this.total=v,o.focusPlayers=h.sort(l)},mouseOver:function(t){this.playersInfo=t.players||[],this.crtPos=t.pos,this.crtGold=t.gold},mouseLeave:function(){},onNext:function(){this.roundNo<this.allRound.length-1?this.roundNo++:o.loopId&&(this.$notify({message:"播放结束",type:"success",center:!0}),this.onStop())},onPre:function(){this.roundNo>0&&this.roundNo--},onAutoPlay:function(){o.loopId?o.onStop():(this.$notify({message:"播放开始",type:"success",center:!0}),o.loopId=setInterval((function(){o.onNext()}),3e3))},onStop:function(){o.loopId&&(clearInterval(o.loopId),o.loopId=0)},onChangePlayer:function(t){this.start()},getPlayersGold:function(){for(var t=this.x,e=this.y,n=this.allRound,o=n[n.length-1].Tilemap,r=[],i=0;i<e;i++)for(var c=0;c<t;c++){var d=o[i][c],f=d.Players||[];d.Players&&f.map((function(t){r.push(t)}))}this.allPlayersRank=r.sort(l),console.log(this.allPlayersRank)}},created:function(){(o=this).nodata?setTimeout((function(t){o.$router.go(-1)}),3e3):(o.getPlayersGold(),o.start())},beforeDestroy:function(){o.$once("hook:beforeDestroy",(function(){o.onStop()}))}},f=(n(346),n(348),n(41)),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[t.nodata?n("div",{staticClass:"noGame"},[t._v("该局游戏不存在")]):n("div",[n("el-page-header",{attrs:{content:"回放详情"},on:{back:function(e){return t.$router.go(-1)}}}),t._v(" "),n("span",{staticClass:"note"},[t._v(" 第 "+t._s(t.roundNo+1)+" 轮")]),t._v(" "),n("div",{staticClass:"btns"},[n("span",{staticClass:"btn",on:{click:function(e){return t.onPre()}}},[t._v("上 一 轮")]),t._v(" "),n("span",{staticClass:"btn",on:{click:function(e){return t.onNext()}}},[t._v("下 一 轮")]),t._v(" "),n("span",{staticClass:"btn",on:{click:function(e){return t.onAutoPlay()}}},[t._v("\n        "+t._s(t.loopId?"停止播放":"自动播放")+"\n      ")])]),t._v(" "),n("div",{staticClass:"main",style:{width:t.mainW+"px",height:t.mainH+"px"}},t._l(t.total,(function(e,i){return n("div",{key:i,staticClass:"items",on:{mouseover:function(n){return t.mouseOver(e)},mouseleave:function(e){return t.mouseLeave()}}},[n("div",{staticClass:"gold"},[t._v(t._s(e.gold))]),t._v(" "),e.players?n("div",t._l(e.players,(function(e,i){return n("div",{key:i},[i<3?n("div",{staticClass:"item",class:{focus:e.isFocus}},[(e.Name+e.Gold).length>8?n("div",[n("marquee",{attrs:{scrollamount:"2"}},[t._v("\n                  "+t._s(e.Name)+" - "+t._s(e.Gold)+"\n                ")])],1):n("div",[t._v(t._s(e.Name)+" - "+t._s(e.Gold))])]):t._e()])})),0):t._e()])})),0),t._v(" "),n("div",{staticClass:"wrapbox focusOver"},[n("div",{staticClass:"conta"},[n("div",{staticClass:"tips"},[t._v("棋盘格信息")]),t._v(" "),t.crtPos?n("div",{staticClass:"crtPos"},[t._v("\n          当前坐标："+t._s(t.crtPos)+" 金币数量："+t._s(t.crtGold)+"\n        ")]):n("div",{staticClass:"nodata"},[t._v("鼠标移过棋盘，展示数据")]),t._v(" "),n("div",{staticClass:"list"},t._l(t.playersInfo,(function(e,i){return n("div",{key:i},[t._v("\n            "+t._s(i+1)+"、团队："),n("span",{staticClass:"tname"},[t._v(t._s(e.Name))]),t._v("\n            金币：\n            "),n("span",{staticClass:"gold"},[t._v(t._s(e.Gold))])])})),0)])]),t._v(" "),n("div",{staticClass:"wrapbox rank"},[n("div",{staticClass:"conta"},[n("div",{staticClass:"tips"},[t._v("本局游戏排名")]),t._v(" "),0==t.allPlayersRank.length?n("div",{staticClass:"nodata"},[t._v("\n          暂无游戏队伍\n        ")]):n("div",{staticClass:"list"},t._l(t.allPlayersRank,(function(e,i){return n("div",{key:i,staticClass:"crtPos"},[n("span",{staticClass:"ranking"},[t._v(" "+t._s(i+1))]),t._v("\n            团队："),n("span",{staticClass:"tname"},[t._v(t._s(e.Name))]),t._v("\n            金币：\n            "),n("span",{staticClass:"gold"},[t._v(t._s(e.Gold))])])})),0)])]),t._v(" "),n("div",{staticClass:"wrapbox playerlist"},[n("div",{},[t._m(0),t._v(" "),0==t.allPlayers.length?n("div",{staticClass:"nodata"},[t._v("暂无游戏队伍")]):n("div",{staticClass:"list"},[n("el-checkbox-group",{attrs:{max:3,"text-color":"#eee"},on:{change:t.onChangePlayer},model:{value:t.focusChecked,callback:function(e){t.focusChecked=e},expression:"focusChecked"}},t._l(t.allPlayers,(function(e){return n("el-checkbox",{key:e,attrs:{label:e}},[t._v("\n              "+t._s(e.slice(0,8))+"\n            ")])})),1)],1)])]),t._v(" "),n("div",{staticClass:"wrapbox focusPlayer"},[n("div",{},[n("div",{staticClass:"tips"},[t._v("关注的游戏队伍")]),t._v(" "),0==t.focusPlayers.length?n("div",{staticClass:"nodata"},[t._v("\n          请在下方选择游戏队伍\n        ")]):n("div",{staticClass:"list"},t._l(t.focusPlayers,(function(e,i){return n("div",{key:i,staticClass:"crtPos"},[n("span",{staticClass:"ranking"},[t._v(" "+t._s(i+1)+"、")]),t._v(" "),n("span",{staticClass:"tname"},[t._v(t._s(e.Name))]),t._v("\n            的金币变更为\n            "),n("span",{staticClass:"gold"},[t._v(t._s(e.Gold))])])})),0)])])],1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tips"},[this._v("选择关注的游戏队伍 "),e("span",[this._v("最多3个")])])}],!1,null,"f16ed2dc",null);e.default=component.exports}}]);