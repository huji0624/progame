(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{336:function(t,e,o){var content=o(340);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(25).default)("20bab125",content,!0,{sourceMap:!1})},337:function(t,e,o){var content=o(343);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(25).default)("eb100f08",content,!0,{sourceMap:!1})},339:function(t,e,o){"use strict";var n=o(336);o.n(n).a},340:function(t,e,o){var n=o(24),r=o(94),c=o(341);e=n(!1);var l=r(c);e.push([t.i,'.container[data-v-226c6909]{margin:0 auto;min-height:100vh;text-align:center;padding:10px;color:#fff}.container .note[data-v-226c6909]{font-weight:700;color:#1dfefe}.container .btns[data-v-226c6909]{margin:50px}.container .btns .btn[data-v-226c6909]{color:#04def0;font-weight:700;font-family:"微软雅黑";padding:15px 32px;margin:0 10px;background-image:url('+l+");background-size:100% 100%;cursor:pointer}.container .btns .btn[data-v-226c6909]:hover{color:#fff}.container .main[data-v-226c6909]{width:702px;background:#330a66;box-shadow:0 0 #333;border-radius:10px;border:7px solid #1dfefe;margin:10px auto;box-shadow:0 2px 12px 0 rgba(0,0,0,.1)}.container .main .items[data-v-226c6909]{width:100px;height:100px;position:relative;border:1px solid #1dfefe;float:left;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background:#330a66;transition:all .2s;font-size:14px;display:flex;flex-wrap:wrap;justify-content:center;align-items:center}.container .main .items .item[data-v-226c6909]{width:95px;height:25px;line-height:23px;margin:3px;border-radius:15px;z-index:99;color:#1eeaf0;background:#635393;border:1px solid #1dfefe}.container .main .items .focus[data-v-226c6909]{color:#0e025e;font-weight:700;background-color:#edcc53;border-color:#929a19}.container .main .items .gold[data-v-226c6909]{width:100px;height:100px;position:absolute;top:0;left:0;color:#969494;padding-top:10px;font-size:60px;font-style:italic;z-index:1;opacity:.3}.container .main .items[data-v-226c6909]:hover{background:#eee}.container .popover[data-v-226c6909]{position:absolute;top:170px;left:20px;width:300px}.container .popover .conta[data-v-226c6909]{padding:12px;z-index:2000;min-height:150px;line-height:1.4;text-align:justify;font-size:14px;box-shadow:0 2px 12px 0 rgba(0,0,0,.1);word-break:break-all;border-radius:10px;border:3px solid #1dfefe;color:#1ceaee;background:#1d0957}.container .popover .conta .crtPos[data-v-226c6909]{color:#fcf8a7}.container .popover .conta .name[data-v-226c6909]{font-weight:700;width:150px;color:#409eff}.container .popover .conta .gold[data-v-226c6909]{font-weight:700;color:#929a19}.container .playerlist[data-v-226c6909]{position:absolute;top:170px;right:20px;width:300px}.container .playerlist .list[data-v-226c6909]{position:absolute;min-width:150px;padding:12px;z-index:2000;width:300px;min-height:150px;line-height:1.4;text-align:justify;font-size:14px;box-shadow:0 2px 12px 0 rgba(0,0,0,.1);word-break:break-all;border-radius:10px;border:3px solid #1dfefe;color:#1ceaee;background:#1d0957}.container .nodata[data-v-226c6909]{color:#fff;width:300px;margin:350px auto;padding:50px;border-radius:5px;color:#64dbf3;border:2px solid #1dfefe}.container .tips[data-v-226c6909]{font-size:20px;font-weight:700}.container .tips span[data-v-226c6909]{font-size:13px;font-weight:300}",""]),t.exports=e},341:function(t,e,o){t.exports=o.p+"img/btn.df4f6ae.png"},342:function(t,e,o){"use strict";var n=o(337);o.n(n).a},343:function(t,e,o){(e=o(24)(!1)).push([t.i,".el-checkbox__input.is-checked .el-checkbox__inner{background-color:#04def0;border-color:#04def0}.el-checkbox,.el-checkbox__input.is-checked+.el-checkbox__label{color:#04def0}.el-checkbox{line-height:30px}.el-checkbox__input.is-indeterminate .el-checkbox__inner{background-color:#04def0;border-color:#04def0}.el-page-header__content{font-size:18px;color:#04def0}.el-checkbox__label{width:90px}",""]),t.exports=e},350:function(t,e,o){"use strict";o.r(e);o(95),o(96),o(49);var n,r=o(4);function c(a,b){if(a.isFocus&&!b.isFocus)return-1}var l={head:function(){return{title:"游戏回放 - 2020程序员节日游戏"}},data:function(){return{roundNo:0,loopId:0,playerlistShow:!0,playersInfo:[],crtPos:"",crtGold:"",players:[],total:[],isFirst:!0,checkAll:!1,focusPlayers:[],isIndeterminate:!1,allPlayers:[]}},watch:{roundNo:function(t){this.start()}},asyncData:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var o,n,data,r,c,l,d,f,h,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.app,n=t.query,data={gid:n.gid},e.next=4,o.$axios.get("game",{params:data});case 4:if(!((r=e.sent)instanceof Array)){e.next=13;break}return c=[],r.forEach((function(t){c.push(JSON.parse(t))})),l=c[0],d=l.Wid,f=l.Hei,h=100*d+14,v=100*f+14,e.abrupt("return",{allRound:c,x:d,y:f,mainW:h,mainH:v,nodata:!1});case 13:return e.abrupt("return",{nodata:!0});case 14:case"end":return e.stop()}}),e)})))()},methods:{start:function(){var t=this,e=this.x,o=this.y,r=(this.players,this.roundNo),l=this.allRound;this.focusPlayers;if(r>l.length-1)return!1;for(var d=l[r].Tilemap,f=[],i=0;i<o;i++)for(var h=0;h<e;h++){var v=d[i][h],x=v.Players||[];this.isFirst&&v.Players&&x.map((function(e){t.allPlayers.push(e.Name)}));var m={players:x.map((function(t){return n.focusPlayers.includes(t.Name)&&(t.isFocus=!0),!n.focusPlayers.includes(t.Name)&&(t.isFocus=!1),t})).sort(c)||[],pos:[h,i],gold:v.Gold};f.push(m)}this.isFirst=!1,this.total=f},mouseOver:function(t){this.playersInfo=t.players||[],this.crtPos=t.pos,this.crtGold=t.gold},mouseLeave:function(){},onNext:function(){this.roundNo<this.allRound.length-1?this.roundNo++:n.loopId&&(this.$notify({message:"播放结束",type:"success",center:!0}),this.onStop())},onPre:function(){this.roundNo>0&&this.roundNo--},onAutoPlay:function(){n.loopId?n.onStop():(this.$notify({message:"播放开始",type:"success",center:!0}),n.loopId=setInterval((function(){n.onNext()}),3e3))},onStop:function(){n.loopId&&(clearInterval(n.loopId),n.loopId=0)},onCheckAll:function(t){this.focusPlayers=t?this.allPlayers:[],this.isIndeterminate=!1},onChangePlayer:function(t){var e=t.length;this.checkAll=e===this.allPlayers.length,this.isIndeterminate=e>0&&e<this.allPlayers.length,this.start()}},created:function(){(n=this).nodata?setTimeout((function(t){n.$router.go(-1)}),3e3):n.start()},beforeDestroy:function(){n.$once("hook:beforeDestroy",(function(){n.onStop()}))}},d=(o(339),o(342),o(45)),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[t.nodata?o("div",{staticClass:"nodata"},[t._v("该局游戏不存在")]):o("div",[o("el-page-header",{attrs:{content:"回放详情"},on:{back:function(e){return t.$router.go(-1)}}}),t._v(" "),o("span",{staticClass:"note"},[t._v(" 第 "+t._s(t.roundNo+1)+" 轮")]),t._v(" "),o("div",{staticClass:"btns"},[o("span",{staticClass:"btn",on:{click:function(e){return t.onPre()}}},[t._v("上 一 轮")]),t._v(" "),o("span",{staticClass:"btn",on:{click:function(e){return t.onNext()}}},[t._v("下 一 轮")]),t._v(" "),o("span",{staticClass:"btn",on:{click:function(e){return t.onAutoPlay()}}},[t._v("\n        "+t._s(t.loopId?"停止播放":"自动播放")+"\n      ")])]),t._v(" "),o("div",{staticClass:"main",style:{width:t.mainW+"px",height:t.mainH+"px"}},t._l(t.total,(function(e,i){return o("div",{key:i,staticClass:"items",on:{mouseover:function(o){return t.mouseOver(e)},mouseleave:function(e){return t.mouseLeave()}}},[o("div",{staticClass:"gold"},[t._v(t._s(e.gold))]),t._v(" "),e.players?o("div",t._l(e.players,(function(e,i){return o("div",{key:i},[i<3?o("div",{staticClass:"item",class:{focus:e.isFocus}},[e.Name.length>4?o("div",[o("marquee",{attrs:{scrollamount:"2"}},[t._v("\n                  "+t._s(e.Name)+" - "+t._s(e.Gold)+"\n                ")])],1):o("div",[t._v(t._s(e.Name)+" - "+t._s(e.Gold))])]):t._e()])})),0):t._e()])})),0),t._v(" "),o("div",{staticClass:"popover"},[o("div",{staticClass:"conta"},[o("div",{staticClass:"tips"},[t._v("棋盘格信息")]),t._v(" "),t.crtPos?o("div",{staticClass:"crtPos"},[t._v("\n          当前坐标："+t._s(t.crtPos)+" 金币数量："+t._s(t.crtGold)+"\n        ")]):t._e(),t._v(" "),t._l(t.playersInfo,(function(e,i){return o("div",{key:i},[t._v("\n          "+t._s(i+1)+"、团队："),o("span",{staticClass:"name"},[t._v(t._s(e.Name))]),t._v("\n          金币：\n          "),o("span",{staticClass:"gold"},[t._v(t._s(e.Gold))])])}))],2)]),t._v(" "),o("div",{staticClass:"playerlist"},[o("div",{staticClass:"list"},[t._m(0),t._v(" "),o("div",{staticStyle:{margin:"15px 0"}}),t._v(" "),o("el-checkbox-group",{attrs:{max:3,"text-color":"#eee"},on:{change:t.onChangePlayer},model:{value:t.focusPlayers,callback:function(e){t.focusPlayers=e},expression:"focusPlayers"}},t._l(t.allPlayers,(function(e){return o("el-checkbox",{key:e,attrs:{label:e}},[t._v("\n            "+t._s(e.slice(0,8))+"\n          ")])})),1)],1)])],1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tips"},[this._v("选择关注的游戏队伍 "),e("span",[this._v("最多3个")])])}],!1,null,"226c6909",null);e.default=component.exports}}]);