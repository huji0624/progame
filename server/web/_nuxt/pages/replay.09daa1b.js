(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{336:function(e,t,o){var content=o(340);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(25).default)("07e4f928",content,!0,{sourceMap:!1})},337:function(e,t,o){var content=o(343);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(25).default)("eb100f08",content,!0,{sourceMap:!1})},339:function(e,t,o){"use strict";var n=o(336);o.n(n).a},340:function(e,t,o){var n=o(24),r=o(94),c=o(341);t=n(!1);var l=r(c);t.push([e.i,'.container[data-v-2e4fbd1f]{margin:0 auto;min-height:100vh;text-align:center;padding:10px;color:#fff}.container .note[data-v-2e4fbd1f]{font-weight:700;color:#1dfefe}.container .btns[data-v-2e4fbd1f]{margin:50px}.container .btns .btn[data-v-2e4fbd1f]{color:#04def0;font-weight:700;font-family:"微软雅黑";padding:15px 32px;margin:0 10px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-image:url('+l+");background-size:100% 100%;cursor:pointer}.container .btns .btn[data-v-2e4fbd1f]:hover{color:#fff}.container .main[data-v-2e4fbd1f]{width:702px;background:#330a66;box-shadow:0 0 #333;border-radius:10px;border:7px solid #1dfefe;margin:10px auto;box-shadow:0 2px 12px 0 rgba(0,0,0,.1)}.container .main .items[data-v-2e4fbd1f]{width:100px;height:100px;position:relative;border:1px solid #1dfefe;float:left;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background:#330a66;transition:all .2s;font-size:14px;display:flex;flex-wrap:wrap;justify-content:center;align-items:center}.container .main .items .item[data-v-2e4fbd1f]{width:95px;height:25px;line-height:23px;margin:3px;border-radius:15px;z-index:99;color:#1eeaf0;background:#635393;border:1px solid #1dfefe}.container .main .items .focus[data-v-2e4fbd1f]{color:#0e025e;font-weight:700;background-color:#edcc53;border-color:#929a19}.container .main .items .gold[data-v-2e4fbd1f]{width:100px;height:100px;position:absolute;top:0;left:0;color:#969494;padding-top:10px;font-size:60px;font-style:italic;z-index:1;opacity:.3}.container .main .items[data-v-2e4fbd1f]:hover{background:#eee}.container .popover[data-v-2e4fbd1f]{position:absolute;top:170px;left:20px;width:300px}.container .popover .conta[data-v-2e4fbd1f]{padding:12px;z-index:2000;min-height:150px;line-height:1.4;text-align:justify;font-size:14px;box-shadow:0 2px 12px 0 rgba(0,0,0,.1);word-break:break-all;border-radius:10px;border:3px solid #1dfefe;color:#1ceaee;background:#1d0957}.container .popover .conta .list[data-v-2e4fbd1f]{max-height:600px;overflow-y:auto}.container .popover .conta .crtPos[data-v-2e4fbd1f]{color:#fcf8a7}.container .popover .conta .name[data-v-2e4fbd1f]{font-weight:700;width:150px;color:#409eff}.container .popover .conta .gold[data-v-2e4fbd1f]{font-weight:700;color:#929a19}.container .playerlist[data-v-2e4fbd1f]{position:absolute;top:170px;right:20px;width:300px;font-size:14px;padding:12px;box-shadow:0 2px 12px 0 rgba(0,0,0,.1);word-break:break-all;border-radius:10px;border:3px solid #1dfefe;color:#1ceaee;background:#1d0957}.container .playerlist .list[data-v-2e4fbd1f]{min-width:150px;padding:12px;z-index:2000;width:300px;max-height:600px;line-height:1.4;text-align:justify;overflow-y:auto}.container .nodata[data-v-2e4fbd1f]{color:#fff;width:300px;margin:350px auto;padding:50px;border-radius:5px;color:#64dbf3;border:2px solid #1dfefe}.container .tips[data-v-2e4fbd1f]{font-size:20px;font-weight:700}.container .tips span[data-v-2e4fbd1f]{font-size:13px;font-weight:300}",""]),e.exports=t},341:function(e,t,o){e.exports=o.p+"img/btn.df4f6ae.png"},342:function(e,t,o){"use strict";var n=o(337);o.n(n).a},343:function(e,t,o){(t=o(24)(!1)).push([e.i,".el-checkbox__input.is-checked .el-checkbox__inner{background-color:#04def0;border-color:#04def0}.el-checkbox,.el-checkbox__input.is-checked+.el-checkbox__label{color:#04def0}.el-checkbox{line-height:30px}.el-checkbox__input.is-indeterminate .el-checkbox__inner{background-color:#04def0;border-color:#04def0}.el-page-header__content{font-size:18px;color:#04def0}.el-checkbox__label{width:90px}",""]),e.exports=t},352:function(e,t,o){"use strict";o.r(t);o(95),o(96),o(49);var n,r=o(4);function c(a,b){if(a.isFocus&&!b.isFocus)return-1}var l={head:function(){return{title:"游戏回放 - 2020程序员节日游戏"}},data:function(){return{roundNo:0,loopId:0,playerlistShow:!0,playersInfo:[],crtPos:"",crtGold:"",players:[],total:[],isFirst:!0,checkAll:!1,focusPlayers:[],isIndeterminate:!1,allPlayers:[]}},watch:{roundNo:function(e){this.start()}},asyncData:function(e){return Object(r.a)(regeneratorRuntime.mark((function t(){var o,n,data,r,c,l,d,f,h,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.app,n=e.query,data={gid:n.gid},t.next=4,o.$axios.get("game",{params:data});case 4:if(!((r=t.sent)instanceof Array)){t.next=13;break}return c=[],r.forEach((function(e){c.push(JSON.parse(e))})),l=c[0],d=l.Wid,f=l.Hei,h=100*d+14,v=100*f+14,t.abrupt("return",{allRound:c,x:d,y:f,mainW:h,mainH:v,nodata:!1});case 13:return t.abrupt("return",{nodata:!0});case 14:case"end":return t.stop()}}),t)})))()},methods:{start:function(){var e=this,t=this.x,o=this.y,r=(this.players,this.roundNo),l=this.allRound;this.focusPlayers;if(r>l.length-1)return!1;for(var d=l[r].Tilemap,f=[],i=0;i<o;i++)for(var h=0;h<t;h++){var v=d[i][h],x=v.Players||[];this.isFirst&&v.Players&&x.map((function(t){e.allPlayers.push(t.Name)}));var m={players:x.map((function(e){return n.focusPlayers.includes(e.Name)&&(e.isFocus=!0),!n.focusPlayers.includes(e.Name)&&(e.isFocus=!1),e})).sort(c)||[],pos:[h,i],gold:v.Gold};f.push(m)}this.isFirst=!1,this.total=f},mouseOver:function(e){this.playersInfo=e.players||[],this.crtPos=e.pos,this.crtGold=e.gold},mouseLeave:function(){},onNext:function(){this.roundNo<this.allRound.length-1?this.roundNo++:n.loopId&&(this.$notify({message:"播放结束",type:"success",center:!0}),this.onStop())},onPre:function(){this.roundNo>0&&this.roundNo--},onAutoPlay:function(){n.loopId?n.onStop():(this.$notify({message:"播放开始",type:"success",center:!0}),n.loopId=setInterval((function(){n.onNext()}),3e3))},onStop:function(){n.loopId&&(clearInterval(n.loopId),n.loopId=0)},onCheckAll:function(e){this.focusPlayers=e?this.allPlayers:[],this.isIndeterminate=!1},onChangePlayer:function(e){var t=e.length;this.checkAll=t===this.allPlayers.length,this.isIndeterminate=t>0&&t<this.allPlayers.length,this.start()}},created:function(){(n=this).nodata?setTimeout((function(e){n.$router.go(-1)}),3e3):n.start()},beforeDestroy:function(){n.$once("hook:beforeDestroy",(function(){n.onStop()}))}},d=(o(339),o(342),o(45)),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"container"},[e.nodata?o("div",{staticClass:"nodata"},[e._v("该局游戏不存在")]):o("div",[o("el-page-header",{attrs:{content:"回放详情"},on:{back:function(t){return e.$router.go(-1)}}}),e._v(" "),o("span",{staticClass:"note"},[e._v(" 第 "+e._s(e.roundNo+1)+" 轮")]),e._v(" "),o("div",{staticClass:"btns"},[o("span",{staticClass:"btn",on:{click:function(t){return e.onPre()}}},[e._v("上 一 轮")]),e._v(" "),o("span",{staticClass:"btn",on:{click:function(t){return e.onNext()}}},[e._v("下 一 轮")]),e._v(" "),o("span",{staticClass:"btn",on:{click:function(t){return e.onAutoPlay()}}},[e._v("\n        "+e._s(e.loopId?"停止播放":"自动播放")+"\n      ")])]),e._v(" "),o("div",{staticClass:"main",style:{width:e.mainW+"px",height:e.mainH+"px"}},e._l(e.total,(function(t,i){return o("div",{key:i,staticClass:"items",on:{mouseover:function(o){return e.mouseOver(t)},mouseleave:function(t){return e.mouseLeave()}}},[o("div",{staticClass:"gold"},[e._v(e._s(t.gold))]),e._v(" "),t.players?o("div",e._l(t.players,(function(t,i){return o("div",{key:i},[i<3?o("div",{staticClass:"item",class:{focus:t.isFocus}},[t.Name.length>4?o("div",[o("marquee",{attrs:{scrollamount:"2"}},[e._v("\n                  "+e._s(t.Name)+" - "+e._s(t.Gold)+"\n                ")])],1):o("div",[e._v(e._s(t.Name)+" - "+e._s(t.Gold))])]):e._e()])})),0):e._e()])})),0),e._v(" "),o("div",{staticClass:"popover"},[o("div",{staticClass:"conta"},[o("div",{staticClass:"tips"},[e._v("棋盘格信息")]),e._v(" "),e.crtPos?o("div",{staticClass:"crtPos"},[e._v("\n          当前坐标："+e._s(e.crtPos)+" 金币数量："+e._s(e.crtGold)+"\n        ")]):e._e(),e._v(" "),e._l(e.playersInfo,(function(t,i){return o("div",{key:i,staticClass:"list"},[e._v("\n          "+e._s(i+1)+"、团队："),o("span",{staticClass:"name"},[e._v(e._s(t.Name))]),e._v("\n          金币：\n          "),o("span",{staticClass:"gold"},[e._v(e._s(t.Gold))])])}))],2)]),e._v(" "),o("div",{staticClass:"playerlist"},[o("div",{},[e._m(0),e._v(" "),o("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),o("div",{staticClass:"list"},[o("el-checkbox-group",{attrs:{max:3,"text-color":"#eee"},on:{change:e.onChangePlayer},model:{value:e.focusPlayers,callback:function(t){e.focusPlayers=t},expression:"focusPlayers"}},e._l(e.allPlayers,(function(t){return o("el-checkbox",{key:t,attrs:{label:t}},[e._v("\n              "+e._s(t.slice(0,8))+"\n            ")])})),1)],1)])])],1)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tips"},[this._v("选择关注的游戏队伍 "),t("span",[this._v("最多3个")])])}],!1,null,"2e4fbd1f",null);t.default=component.exports}}]);