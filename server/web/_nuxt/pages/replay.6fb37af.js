(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{339:function(e,t,n){e.exports=n.p+"img/btn.df4f6ae.png"},341:function(e,t,n){var content=n(350);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(20).default)("02434deb",content,!0,{sourceMap:!1})},342:function(e,t,n){var content=n(352);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(20).default)("eb100f08",content,!0,{sourceMap:!1})},349:function(e,t,n){"use strict";var o=n(341);n.n(o).a},350:function(e,t,n){var o=n(19),r=n(135),c=n(339);t=o(!1);var l=r(c);t.push([e.i,'.container[data-v-42ae53fe]{margin:0 auto;min-height:100vh;text-align:center;padding:10px;color:#fff}.container .note[data-v-42ae53fe]{font-weight:700;color:#1dfefe}.container .btns[data-v-42ae53fe]{margin:30px auto}.container .btns .btn[data-v-42ae53fe]{color:#04def0;font-weight:700;font-family:"微软雅黑";padding:15px 32px;margin:0 10px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-image:url('+l+");background-size:100% 100%;cursor:pointer}.container .btns .btn[data-v-42ae53fe]:hover{color:#fff}.container .main[data-v-42ae53fe]{width:702px;background:#330a66;box-shadow:0 0 #333;border-radius:10px;border:7px solid #1dfefe;margin:10px 10px 10px 400px;box-shadow:0 2px 12px 0 rgba(0,0,0,.1)}.container .main .items[data-v-42ae53fe]{width:100px;height:100px;position:relative;border:1px solid #1dfefe;float:left;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background:#330a66;transition:all .2s;font-size:14px;display:flex;flex-wrap:wrap;justify-content:center;align-items:center}.container .main .items .item[data-v-42ae53fe]{width:95px;height:25px;line-height:23px;margin:3px;border-radius:15px;z-index:99;color:#1eeaf0;background:#635393;border:1px solid #1dfefe}.container .main .items .focus[data-v-42ae53fe]{color:#0e025e;font-weight:700;background-color:#edcc53;border-color:#929a19}.container .main .items .gold[data-v-42ae53fe]{width:100px;height:100px;position:absolute;top:0;left:0;color:#969494;padding-top:10px;font-size:60px;font-style:italic;z-index:1;opacity:.3}.container .main .items[data-v-42ae53fe]:hover{background:#eee}.container .wrapbox[data-v-42ae53fe]{position:absolute;top:170px;left:20px;width:300px;font-size:14px;padding:12px;color:#1ceaee;word-break:break-all;border-radius:10px;border:3px solid #1dfefe;background:#1d0957;box-shadow:0 2px 12px 0 rgba(0,0,0,.1)}.container .wrapbox .tips[data-v-42ae53fe]{font-size:20px;font-weight:700;line-height:30px}.container .wrapbox .tips span[data-v-42ae53fe]{font-size:13px;font-weight:300}.container .wrapbox .list[data-v-42ae53fe]{min-width:150px;z-index:2000;width:300px;max-height:200px;line-height:1.4;text-align:justify;overflow-y:auto}.container .playerlist[data-v-42ae53fe]{top:400px}.container .focusPlayer[data-v-42ae53fe]{top:270px}.container .focusPlayer .ranking[data-v-42ae53fe]{font-weight:700}.container .focusOver[data-v-42ae53fe]{top:70px}.container .focusOver .crtPos[data-v-42ae53fe]{text-align:left;color:#fcf8a7;line-height:30px}.container .focusOver .list[data-v-42ae53fe]{max-height:100px}.container .rank[data-v-42ae53fe]{top:675px}.container .rank .ranking[data-v-42ae53fe]{font-size:16px;color:#fcf8a7;display:inline-block;font-weight:700;width:22px}.container .tname[data-v-42ae53fe]{display:inline-block;font-size:14px;font-weight:700;width:94px;color:#add5fd}.container .gold[data-v-42ae53fe]{font-weight:700;color:#ffeb00}.container .nodata[data-v-42ae53fe]{line-height:50px}.container .noGame[data-v-42ae53fe]{color:#fff;width:300px;margin:350px auto;padding:50px;border-radius:5px;color:#64dbf3;border:2px solid #1dfefe}",""]),e.exports=t},351:function(e,t,n){"use strict";var o=n(342);n.n(o).a},352:function(e,t,n){(t=n(19)(!1)).push([e.i,".el-checkbox__input.is-checked .el-checkbox__inner{background-color:#04def0;border-color:#04def0}.el-checkbox,.el-checkbox__input.is-checked+.el-checkbox__label{color:#04def0}.el-checkbox{line-height:24px}.el-checkbox__input.is-indeterminate .el-checkbox__inner{background-color:#04def0;border-color:#04def0}.el-page-header__content{font-size:18px;color:#04def0}.el-checkbox__label{width:90px}",""]),e.exports=t},364:function(e,t,n){"use strict";n.r(t);n(94),n(95),n(34);var o,r=n(2);function c(a,b){if(a.isFocus&&!b.isFocus)return-1}function l(a,b){if(a.Gold>b.Gold)return-1}var d={head:function(){return{title:"游戏回放 - 2020程序员节日游戏"}},data:function(){return{roundNo:0,loopId:0,playerlistShow:!0,playersInfo:[],crtPos:"",crtGold:"",players:[],total:[],isFirst:!0,checkAll:!1,focusPlayers:[],focusChecked:[],isIndeterminate:!1,allPlayers:[],allPlayersRank:[]}},watch:{roundNo:function(e){this.start()}},asyncData:function(e){return Object(r.a)(regeneratorRuntime.mark((function t(){var n,o,data,r,c,l,d,f,v,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.app,o=e.query,data={gid:o.gid},t.next=4,n.$axios.get("game",{params:data});case 4:if(!((r=t.sent)instanceof Array)){t.next=13;break}return c=[],r.forEach((function(e){c.push(JSON.parse(e))})),l=c[0],d=l.Wid,f=l.Hei,v=100*d+14,h=100*f+14,t.abrupt("return",{allRound:c,x:d,y:f,mainW:v,mainH:h,nodata:!1});case 13:return t.abrupt("return",{nodata:!0});case 14:case"end":return t.stop()}}),t)})))()},methods:{start:function(){var e=this,t=this.x,n=this.y,r=(this.players,this.roundNo),d=this.allRound;this.focusChecked;if(r>d.length-1)return!1;for(var f=d[r].Tilemap,v=[],h=[],i=0;i<n;i++)for(var x=0;x<t;x++){var _=f[i][x],m=_.Players||[];this.isFirst&&_.Players&&m.map((function(t){e.allPlayers.push(t.Name)}));var y={players:m.map((function(e){return o.focusChecked.includes(e.Name)&&(e.isFocus=!0,h.push(e)),!o.focusChecked.includes(e.Name)&&(e.isFocus=!1),e})).sort(c)||[],pos:[x,i],gold:_.Gold};v.push(y)}this.isFirst=!1,this.total=v,o.focusPlayers=h.sort(l)},mouseOver:function(e){this.playersInfo=e.players||[],this.crtPos=e.pos,this.crtGold=e.gold},mouseLeave:function(){},onNext:function(){this.roundNo<this.allRound.length-1?this.roundNo++:o.loopId&&(this.$notify({message:"播放结束",type:"success",center:!0}),this.onStop())},onPre:function(){this.roundNo>0&&this.roundNo--},onAutoPlay:function(){o.loopId?o.onStop():(this.$notify({message:"播放开始",type:"success",center:!0}),o.loopId=setInterval((function(){o.onNext()}),3e3))},onStop:function(){o.loopId&&(clearInterval(o.loopId),o.loopId=0)},onChangePlayer:function(e){this.start()},getPlayersGold:function(){for(var e=this.x,t=this.y,n=this.allRound,o=n[n.length-1].Tilemap,r=[],i=0;i<t;i++)for(var c=0;c<e;c++){var d=o[i][c],f=d.Players||[];d.Players&&f.map((function(e){r.push(e)}))}this.allPlayersRank=r.sort(l),console.log(this.allPlayersRank)}},created:function(){(o=this).nodata?setTimeout((function(e){o.$router.go(-1)}),3e3):(o.getPlayersGold(),o.start())},beforeDestroy:function(){o.$once("hook:beforeDestroy",(function(){o.onStop()}))}},f=(n(349),n(351),n(42)),component=Object(f.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[e.nodata?n("div",{staticClass:"noGame"},[e._v("该局游戏不存在")]):n("div",[n("el-page-header",{attrs:{content:"回放详情"},on:{back:function(t){return e.$router.go(-1)}}}),e._v(" "),n("div",{staticClass:"btns"},[n("span",{staticClass:"note"},[e._v(" 第 "+e._s(e.roundNo+1)+" 轮")]),e._v(" "),n("span",{staticClass:"btn",on:{click:function(t){return e.onPre()}}},[e._v("上 一 轮")]),e._v(" "),n("span",{staticClass:"btn",on:{click:function(t){return e.onNext()}}},[e._v("下 一 轮")]),e._v(" "),n("span",{staticClass:"btn",on:{click:function(t){return e.onAutoPlay()}}},[e._v("\n        "+e._s(e.loopId?"停止播放":"自动播放")+"\n      ")])]),e._v(" "),n("div",{staticClass:"main",style:{width:e.mainW+"px",height:e.mainH+"px"}},e._l(e.total,(function(t,i){return n("div",{key:i,staticClass:"items",on:{mouseover:function(n){return e.mouseOver(t)},mouseleave:function(t){return e.mouseLeave()}}},[n("div",{staticClass:"gold"},[e._v(e._s(t.gold))]),e._v(" "),t.players?n("div",e._l(t.players,(function(t,i){return n("div",{key:i},[i<3?n("div",{staticClass:"item",class:{focus:t.isFocus}},[(t.Name+t.Gold).length>6?n("div",[n("marquee",{attrs:{scrollamount:"2"}},[e._v("\n                  "+e._s(t.Name)+" - "+e._s(t.Gold)+"\n                ")])],1):n("div",[e._v(e._s(t.Name)+" - "+e._s(t.Gold))])]):e._e()])})),0):e._e()])})),0),e._v(" "),n("div",{staticClass:"wrapbox focusOver"},[n("div",{staticClass:"conta"},[n("div",{staticClass:"tips"},[e._v("棋盘格信息")]),e._v(" "),e.crtPos?n("div",{staticClass:"crtPos"},[e._v("\n          当前坐标："+e._s(e.crtPos)+" 金币数量："+e._s(e.crtGold)+"\n        ")]):n("div",{staticClass:"nodata"},[e._v("鼠标移过棋盘，展示数据")]),e._v(" "),n("div",{staticClass:"list"},e._l(e.playersInfo,(function(t,i){return n("div",{key:i},[e._v("\n            "+e._s(i+1)+"、团队："),n("span",{staticClass:"tname"},[e._v(e._s(t.Name))]),e._v("\n            金币：\n            "),n("span",{staticClass:"gold"},[e._v(e._s(t.Gold))])])})),0)])]),e._v(" "),n("div",{staticClass:"wrapbox rank"},[n("div",{staticClass:"conta"},[n("div",{staticClass:"tips"},[e._v("本局游戏排名")]),e._v(" "),0==e.allPlayersRank.length?n("div",{staticClass:"nodata"},[e._v("\n          暂无游戏队伍\n        ")]):n("div",{staticClass:"list"},e._l(e.allPlayersRank,(function(t,i){return n("div",{key:i,staticClass:"crtPos"},[n("span",{staticClass:"ranking"},[e._v(" "+e._s(i+1))]),e._v("\n            团队："),n("span",{staticClass:"tname"},[e._v(e._s(t.Name))]),e._v("\n            金币：\n            "),n("span",{staticClass:"gold"},[e._v(e._s(t.Gold))])])})),0)])]),e._v(" "),n("div",{staticClass:"wrapbox playerlist"},[n("div",{},[e._m(0),e._v(" "),0==e.allPlayers.length?n("div",{staticClass:"nodata"},[e._v("暂无游戏队伍")]):n("div",{staticClass:"list"},[n("el-checkbox-group",{attrs:{max:3,"text-color":"#eee"},on:{change:e.onChangePlayer},model:{value:e.focusChecked,callback:function(t){e.focusChecked=t},expression:"focusChecked"}},e._l(e.allPlayers,(function(t){return n("el-checkbox",{key:t,attrs:{label:t}},[e._v("\n              "+e._s(t.slice(0,8))+"\n            ")])})),1)],1)])]),e._v(" "),n("div",{staticClass:"wrapbox focusPlayer"},[n("div",{},[n("div",{staticClass:"tips"},[e._v("关注的游戏队伍")]),e._v(" "),0==e.focusPlayers.length?n("div",{staticClass:"nodata"},[e._v("\n          请选择游戏队伍\n        ")]):n("div",{staticClass:"list"},e._l(e.focusPlayers,(function(t,i){return n("div",{key:i,staticClass:"crtPos"},[n("span",{staticClass:"ranking"},[e._v(" "+e._s(i+1)+"、")]),e._v(" "),n("span",{staticClass:"tname"},[e._v(e._s(t.Name))]),e._v("\n            的金币变更为\n            "),n("span",{staticClass:"gold"},[e._v(e._s(t.Gold))])])})),0)])])],1)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tips"},[this._v("关注的游戏队伍 "),t("span",[this._v("最多3个")])])}],!1,null,"42ae53fe",null);t.default=component.exports}}]);